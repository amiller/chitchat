<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>CHITchat</title>
    <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/css/ui-lightness/jquery-ui-1.8.14.custom.css" type="text/css" media="screen" />
    <script type="text/javascript" data-main="/js/main" src="/js/require.js"></script>
    <script type="text/x-jquery-tmpl" id="tmpl_instructions">
        {{if condition == 1}}
            {{if role == 'insurer'}}You are the <span class="insurer">mediator</span>.The <span class="buyer">buyer</span> can send 25 cents to you, but not directly to the <span class="seller">seller</span>.  You can send 25 cents to the <span class="seller">seller</span> or the <span class="buyer">buyer</span> at any time. The <span class="seller">seller</span> can send the gold token directly to the <span class="buyer">buyer</span>. You can chat with both the <span class="buyer">buyer</span> and <span class="seller">seller</span>. Chat with them to help the deal go through! Make sure that both the <span class="seller">seller</span> and the <span class="buyer">buyer</span> understand the deal and are willing to trade fairly.
            {{else role == 'buyer'}}You are the <span class="buyer">buyer</span>. If you purchase the <span class="gold">gold token</span> from the <span class="seller">seller</span>, then you’ll earn a 50 cent bonus. Instead of paying 25 cents directly to the <span class="seller">seller</span>, you send it to the <span class="insurer">mediator</span>, who will hold the payment until the <span class="seller">seller</span> sends you the <span class="gold">token</span>. Talk with the <span class="insurer">mediator</span>to find out if the <span class="seller">seller</span> agrees to the trade.
            {{else role == 'seller'}}You are the seller. You can offer to sell your <span class="gold">gold token</span> if the <span class="buyer">buyer</span> pays you 25 cents to add to your bonus. Instead of sending you the 25 cents directly, the <span class="buyer">buyer</span> sends his payment to the <span class="insurer">mediator</span>, who will hold it until you send the <span class="gold">token</span>. Talk with the <span class="insurer">mediator</span>to find out if the <span class="buyer">buyer</span> agrees to the trade.{{/if}}
        {{else condition == 2}} 
            {{if role == 'insurer'}}You are the <span class="insurer">mediator</span>. You can send 25 cents to the <span class="seller">seller</span> or the <span class="buyer">buyer</span> at any time. The <span class="buyer">buyer</span> has to send the <span class="seller">seller</span> his 25 cents before the <span class="seller">seller</span> can send the <span class="gold">gold token</span>. Your job is to offer the <span class="buyer">buyer</span> a refund if the <span class="seller">seller</span> leaves without sending the token. If you give the <span class="buyer">buyer</span> a refund, ask the <span class="seller">seller</span> to pay you back. You can chat with both the <span class="buyer">buyer</span> and <span class="seller">seller</span> - talk with them to help the deal go through! Make sure that both the <span class="seller">seller</span> and the <span class="buyer">buyer</span> understand the deal and are willing to trade fairly.
            {{else role == 'buyer'}}You are the <span class="buyer">buyer</span>. If you purchase the <span class="gold">gold token</span> from the <span class="seller">seller</span>, then you’ll earn a 50 cent bonus. The <span class="insurer">mediator</span>is able to offer you a refund if the <span class="seller">seller</span> leaves without sending you the <span class="gold">token</span>. Talk with the <span class="insurer">mediator</span>to find out if the <span class="seller">seller</span> agrees to the trade.
            {{else role == 'seller'}}You are the <span class="seller">seller</span>. You can offer to sell your <span class="gold">gold token</span> if the <span class="buyer">buyer</span> pays you 25 cents. The <span class="insurer">mediator</span>is able to offer the <span class="buyer">buyer</span> a refund in case you don’t send the <span class="gold">gold token</span>. Talk with the <span class="insurer">mediator</span>to find out if the <span class="buyer">buyer</span> agrees to the trade.{{/if}}
        {{else condition == 3}} 
            {{if role == 'insurer'}}You are the <span class="insurer">mediator</span>. The <span class="buyer">buyer</span> has to send the <span class="seller">seller</span> his 25 cents before the <span class="seller">seller</span> can send the <span class="gold">gold token</span>. You can send 25 cents to the <span class="seller">seller</span> or the <span class="buyer">buyer</span> at any time. You can also seize the 25 cent payment back from the <span class="seller">seller</span>.  You can chat with both the <span class="buyer">buyer</span> and <span class="seller">seller</span> - talk with them to help the deal go through! Make sure that both the <span class="seller">seller</span> and the <span class="buyer">buyer</span> understand the deal and are willing to trade fairly. 
            {{else role == 'buyer'}}You are the <span class="buyer">buyer</span>. If you purchase the <span class="gold">gold token</span> from the seller, then you’ll earn a 50 cent bonus. The <span class="insurer">mediator</span>is able to take your payment back from the <span class="seller">seller</span> and offer you a refund in case the <span class="seller">seller</span> leaves without sending you the <span class="gold">gold token</span>. Talk with the <span class="insurer">mediator</span>to find out if the <span class="seller">seller</span> agrees to the trade.
            {{else role == 'seller'}}You are the <span class="seller">seller</span>. You can offer to sell your <span class="gold">gold token</span> if the <span class="buyer">buyer</span> pays you 25 cents. The <span class="insurer">mediator</span>is able to seize back the payment and offer the <span class="buyer">buyer</span> a refund if you do not send the <span class="gold">gold token</span>.  Talk with the <span class="insurer">mediator</span>to find out if the <span class="buyer">buyer</span> agrees to the trade.{{/if}}
        {{/if}}
    </script>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
  </head>
  <body>
    <div id="body">
      <div id="content" class="disabled">
        <div class="info seller" id="seller_token_info" style="display:none;">The <span class="seller">seller</span> starts with one gold token.</div>
        <div class="profilebox buyer" id="buyer_profile">
          <img class="profileimage" id="buyer_image" src="http://robohash.org/buyer.png?size=50x50&set=set3" />
            <div class="lfloat profilenamewallet">
              <span class="profilename" id="buyer_profilename">Buyer</span>
              <span class="profilewallet money">$0.25</span>
            </div>
          <a href="javascript:void(0);" class="profiletokenlink"><img class="profiletoken token_missing" id="buyer_token" src="/img/token_missing.png" /></a>
        </div>
        <div id="buyer_seller_arrows">
          <div id="buyer_send_seller_box">
            <div class="button_explanation" style="display:none;">
              <h2>Confirm sending 25 cents to seller.</h2>
              <ul>
                <li>The Seller will gain 25 cents.</li>
                <li>You will lose 25 cents.</li>
              </ul>
            </div>
            <button class="button_give ui-corner-all buyer" id="buyer_send_seller"><span class="action">Give 25&cent;</span> <span class="transitive">to</span> Seller</button>
          </div>
          <div class="lfloat ui-corner-all" style="height: 34px; border: 3px solid black;"></div>
          <div id="seller_send_buyer_box">
            <div class="button_explanation" style="display:none;">
              <h2>Confirm sending 25 cents to buyer.</h2>
              <ul>
                <li>The buyer will gain 25 cents.</li>
                <li>You will lose 25 cents.</li>
              </ul>
            </div>
            <button class="button_give ui-corner-all seller" id="seller_send_buyer"><span class="action">Give token</span> <span class="transitive">to</span> Buyer</button>
          </div>
        </div>
        <div class="profilebox seller" id="seller_profile">
          <img class="profileimage" id="seller_image" src="http://robohash.org/seller1.png?size=50x50&set=set3" />
            <div class="lfloat profilenamewallet">
              <span class="profilename" id="seller_profilename">Seller</span>
              <span class="profilewallet money">$0.25</span>
            </div>
          <a href="javascript:void(0);" class="profiletokenlink"><img class="profiletoken token_missing" id="seller_token" src="/img/token_missing.png" /></a>
        </div>
        <div class="clear"> </div>
        <div class="chatbox" id="buyer_chatbox">
          <div class="chatmessages" id="buyer_chatmessages">
            <div class="info message" id="chat_info_buyer_insurer" style="display:none;">
              <span>Use this chatbox to speak with the mediator. Tips:</span>
              <ul>
                <li>Promise the mediator you’ll be honest</li>
                <li>Ask the mediator to promise you a refund, just in case</li>
                <li>Find out if the <span class="seller">seller</span> has agreed to the deal before sending money</li>
              </ul>
            </div>
            <div class="info message" id="chat_info_insurer_buyer" style="display:none;">
              <span>Use this chatbox to speak with the buyer. Tips:</span>
              <ul>
                <li>Find out if the buyer will be honest.</li>
                <li>Offer the buyer a refund in case he doesn’t get the token.</li>
                <li>Let the buyer know if the <span class="seller">seller</span> agrees to the deal</li>
                <li>Find out when the buyer receives the token</li>
              </ul></div>
          </div>
          <textarea class="chatinput" id="buyer_chatinput" disabled="disabled"></textarea>
        </div>
        <div id="insurer_arrows" align="center">
          <div id="insurer_buttons">
            <div id="insurer_buttons_line1">
            <div class="button_explanation" style="display:none;">
              <h2>Confirm sending 25 cents to mediator.</h2>
              <ul>
                <li>The mediator will gain 25 cents.</li>
                <li>You will lose 25 cents.</li>
              </ul>
            </div>
              <button class="button_give ui-corner-all buyer lfloat" id="buyer_send_insurer"><span class="action">Give 25&cent;</span> <span class="transitive">to</span> Insurer</button>
              <div class="button_explanation" style="display:none;">
                <h2>Confirm sending 25 cents to mediator.</h2>
                <ul>
                  <li>The mediator will gain 25 cents.</li>
                  <li>You will lose 25 cents.</li>
                </ul>
              </div>
              <button class="button_give ui-corner-all seller rfloat" id="seller_send_insurer"><span class="action">Give 25&cent;</span> <span class="transitive">to</span> Mediator</button>
            </div>
            <div class="clear"> </div>
            <div id="insurer_buttons_separator">
              <div class="lfloat ui-corner-all"></div>
              <div class="rfloat ui-corner-all"></div>
            </div>
            <div class="clear"> </div>
            <div id="insurer_buttons_line2">
              <div class="button_explanation" style="display:none;">
                <h2>Confirm taking 25 cents from buyer.</h2>
                <ul>
                  <li>The buyer will lose 25 cents.</li>
                  <li>You will gain 25 cents.</li>
                </ul>
              </div>
              <button class="button_take ui-corner-all insurer lfloat" id="insurer_take_buyer"><span class="action">Take 25&cent;</span> <span class="transitive">from</span> Buyer</button>
              <div class="button_explanation" style="display:none;">
                <h2>Confirm taking 25 cents from seller.</h2>
                <ul>
                  <li>The seller will lose 25 cents.</li>
                  <li>You will gain 25 cents.</li>
                </ul>
              </div>
              <button class="button_take ui-corner-all insurer rfloat" id="insurer_take_seller"><span class="action">Take 25&cent;</span> <span class="transitive">from</span> Seller</button>
            </div>
            <div class="clear"> </div>
            <div id="insurer_buttons_line3">
              <div class="button_explanation" style="display:none;">
                <h2>Confirm sending 25 cents to buyer.</h2>
                <ul>
                  <li>The buyer will gain 25 cents.</li>
                  <li>You will lose 25 cents.</li>
                </ul>
              </div>
              <button class="button_give ui-corner-all insurer lfloat" id="insurer_send_buyer"><span class="action">Give 25&cent;</span> <span class="transitive">to</span> Buyer</button>
              <div class="button_explanation" style="display:none;">
                <h2>Confirm sending 25 cents to seller.</h2>
                <ul>
                  <li>The seller will gain 25 cents.</li>
                  <li>You will lose 25 cents.</li>
                </ul>
              </div>
              <button class="button_give ui-corner-all insurer rfloat" id="insurer_send_seller"><span class="action">Give 25&cent;</span> <span class="transitive">to</span> Seller</button>
            </div>
          </div>
          <div class="profilebox insurer" id="insurer_profile">
            <img class="profileimage" id="insurer_image" src="http://robohash.org/insurer.png?size=50x50&set=set3" />
            <div class="lfloat profilenamewallet">
              <span class="profilename" id="insurer_profilename">Mediator</span>
              <span class="profilewallet money">$0.25</span>
            </div>
          </div>
        </div>
        <div class="chatbox" id="seller_chatbox">
          <div class="chatmessages" id="seller_chatmessages">
            <div class="info message" id="chat_info_seller_insurer" style="display:none;">
              <span>Use this chatbox to speak with the mediator. Tips:</span>
              <ul>
                <li>Promise the mediator you’ll be honest</li>
                <li>Tell the mediator you agree to send the token after the buyer sends payment</li>
              </ul>
            </div>
            <div class="info message" id="chat_info_insurer_seller" style="display:none;">
              <span>Use this chatbox to speak with the seller. Tips:</span>
              <ul>
                <li>Find out if the seller will be honest.</li>
                <li>Find out if the seller has the token and agrees to the trade.</li>
                <li>Find out when the seller sends the token</li>
              </ul>
            </div>
          </div>
          <textarea class="chatinput" id="seller_chatinput" disabled="disabled"></textarea>
        </div>
        <div class="clear"> </div>
      </div>
      <div id="timer">0:00</div>
      <div id="notifications_list">
        <div class="ui-corner-all" id="notification" style="display:none;">
          <div id="latest_notification"><span class="title"></span>: <span class="body"></span></div>
        </div>
        <div class="instructions ui-corner-all" id="instructions_role" style="display:none;">
          <div class="title"><span>Specific Role</span> Instructions</div>
          <div class="body">
            <div class="buyer_instructions"></div>
            <div class="seller_instructions"></div>
            <div class="insurer_instructions"></div>
          </div>
        </div>
        <div class="instructions ui-corner-all" id="instructions">
          <div class="title">Instructions</div>
          <div class="body">
            <p>This is a game played with three people, the <span class="buyer">buyer</span>, the <span class="seller">seller</span> and the <span class="insurer">mediator</span>. You will randomly be assigned one of these roles.</p>
<p><i>All the three parties keep whatever bonus they have at the end of the game!</i></p>
            <p>Everyone starts out with 25 cents. The <span class="seller">seller</span> also starts out with a <span class="gold">gold token</span> <img height="30" width="30" src="/img/has_token.png" />, which he can sell to the <span class="buyer">buyer</span> for 25 cents. If the <span class="buyer">buyer</span> ends up with the <span class="gold">gold token</span>, then both he and the <span class="insurer">mediator</span> earn 50 cents in bonus. So if the <span class="buyer">buyer</span> and <span class="seller">seller</span> make a deal, then everyone gets 50 cents. However, the <span class="buyer">buyer</span> has to go first. The <span class="seller">seller</span> has to be trusted to give the <span class="gold">gold token</span> on his turn. The <span class="buyer">buyer</span> and <span class="seller">seller</span> cannot speak directly to each other, but they can both chat with the <span class="insurer">mediator</span>. The <span class="insurer">mediator’s</span> job is to help make a fair deal.</p>
<p>After 5 minutes, the game will end and you will be asked to fill out a survey questionnaire. You must wait for the end of the game and complete the survey to receive the $1 payment and bonuses earned.</p>

            <label><input id="approve_check" type="checkbox">I've read the instructions and I'm ready to play</label><br />
            <input id="approve" type="button" value="Start"/>
          </div>
        </div>
      </div>
      <div id="eventlog"></div>
    </div>
  </body>
</html>
